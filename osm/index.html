<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>19:30 London Bridge to East Croydon</title>

    <link rel="stylesheet" href="assets/leaflet/dist/leaflet.css" />
    <script src="assets/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="assets/Leaflet.label/dist/leaflet.label.css" />
    <script src="assets/Leaflet.label/dist/leaflet.label.js"></script>

    <script type="text/javascript" src="assets/d3/d3.js"></script>
    <script src="assets/jquery/dist/jquery.min.js"></script>
    <script src="assets/bootstrap/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="assets/webui-popover/dist/jquery.webui-popover.min.css">
    <script src="assets/webui-popover/dist/jquery.webui-popover.min.js"></script>
    <style>
      body { padding-bottom: 70px; }
      #map {
        height:600px;
        position:fixed;
        left:0px;
        top:50px;
        width:50%;
        margin-top:0px;
        margin-bottom:50px;
      }
      .hidden {
        display:none;
      }
      table {
        table-layout: fixed;
        margin:auto;
      }
      .cell {
        text-align:center;
        border-radius: 25%;
      }
      th.rowHeader {
        text-align: center;
      }
      .section {
        border-bottom-color:#ccc;
        border-bottom-style: solid;
        border-bottom-width: 5px;
        margin-bottom:10px;
        padding-bottom:20px;
      }
      .axis text {
        font: 10px sans-serif;
      }
      .axis path,
      .axis line {
        fill:none;
        stroke: #000;
        shape-rendering: crispEdges;
      }
      .x.axis path {
        display: none;
      }
      div.section form input,
      div.section form select {
        border-color: #1f40c2;

      }
      div.section form a {
        background-color:#28abe3;
        border-style:none;
      }
      .active-train {
        background-color:#eee !important;
      }
      [crs] {
        background-color:#ccc;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color: #28abe3">
    </nav>
    <div class="container-fluid" style="">
      <div class="row" style="" id="multiscroll">
        <div class="ms-left col-md-6">
          <div class="" id="map">
          </div>
        </div>
        <div class="col-md-6 ms-right" style="">
          <div class="section" id="start">
            <form class="form-horizontal">
              <div class="form-group">
                <label for="trainFrom" class="col-sm-1 control-label">From:</label>
                <div class="col-sm-11">
                  <input type="text" class="form-control" id="trainFrom" placeholder="London Bridge">
                </div>
              </div>
              <div class="form-group">
                <label for="trainTo" class="col-sm-1 control-label">To:</label>
                <div class="col-sm-11">
                  <input type="text" class="form-control" id="trainTo" placeholder="East Croydon">
                </div>
              </div>
              <div class="form-group">
                <label for="trainSchedule" class="col-sm-1">Type:</label>
                <div class="col-sm-3">
                  <select id="trainSchedule" class="form-control">
                    <option>Weekdays</option>
                    <option>Weekends</option>
                  </select>
                </div>
                <label for="trainTime" class="col-sm-1 col-sm-offset-4">Time:</label>
                <div class="col-sm-3">
                  <input type="time" class="form-control" id="trainTime">
                </div>
              </div>
              <a class="btn btn-default btn-lg pull-right" id="findTrains" role="button" href="#">Find Trains</a>
              <div class="clearfix"></div>
            </form>

          </div>


          <div id="viz">
            <a name="overview"></a>
            <h3 id="vizTitle" style="text-align:center;"></h3>
            <div class="hidden" id="tables">
            </div>
          </div>
        </div>

      </div>
    </div>
    <div id="dayDetail" style="width:25%; visibility: hidden">
      <h4 id="dayDetailTitle"></h4>
      <svg id="dayDetailGraph"></svg>
    </div>
    <nav class="navbar navbar-default navbar-fixed-bottom">
    </nav>
    <div id="dummy" class="hidden"></div>
    <script type="text/javascript">
      $(document).ready(function() {
          $("a").click(function() {
            switch (this.id) {
              case "findTrains":
                if (trainTo.value == "") {
                  trainFrom.value = "London Bridge";
                  $("#tables").removeClass("hidden");
                  getTrainOverview([trainFrom.value])
                  $('html,body').animate({
                    scrollTop: $("#tables").offset().top - 50
                    }, 1000);
                } else {
                  trainFrom.value = "London Bridge";
                  trainTo.value = "East Croydon";
                  $("#tables").removeClass("hidden");
                  getTrainOverview([trainFrom.value, trainTo.value]);
                  $('html,body').animate({
                    scrollTop: $("#tables").offset().top - 50
                    }, 1000);
                }
                break;
            default:
              break;
            }
          })
      });
// Initialise Map
maxLng = 58.86;
maxLat = 2.57;
minLng = 49.95;
minLat = -12.76;
var map = null;
var L;
if (L != null) {
    var map = L.map('map').setView([(minLat+maxLat)/2,(minLng+maxLng)/2], 2);
    L.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.png', {
  attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://maps.stamen.com">Stamen</a>',
            maxZoom: 18
            }).addTo(map);

    map.fitBounds([[minLng,minLat], [maxLng,maxLat]]);
}
if (L == undefined) {
  L = {}
  L.latLng = function(lat,lng) {
    return {lat:lat, lng:lng};
  }
}
</script>

<script src="viz.js"></script>
  </body>
</html>
